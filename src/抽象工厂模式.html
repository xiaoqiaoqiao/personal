<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>抽象工厂模式</title>
    <script type="text/javascript">
        //抽象工厂方法
        var VeicleFactory=function(subType,superType){
            //判断抽象工厂中是否有该抽象类
            if(typeof VeicleFactory[superType]==="function"){
                //缓存类
                function F(){}
                //继承父类属性和方法
                F.prototype=new VeicleFactory[superType]();
                //将子类constructor指向子类
                subType.constructor=subType;
                //子类原型继承父类
                subType.prototype=new F();
            }
            else{
                throw new Error("未创建该抽象类");
            }
        };

        //抽象类定义
        VeicleFactory.Car=function(){
            this.type="Car";
        };

        VeicleFactory.Car.prototype={
            getPrice:function(){
                return new Error("抽象方法不能调用");
            },
            getSpeed:function(){
                return new Error("抽象方法不能调用");
            }
        };

        VeicleFactory.Bus=function(){
            this.type="Bus";
        };

        VeicleFactory.Bus.prototype={
            getPrice:function(){
                return new Error("抽象方法不能调用");
            },
            getPassengerNum:function(){
                return new Error("抽象方法不能调用");
            }
        };

        VeicleFactory.Truck=function(){
            this.type="Truck";
        };

        VeicleFactory.Truck.prototype={
            getPrice:function(){
                return new Error("抽象方法不能调用");
            },
            getTrainload:function(){
                return new Error("抽象方法不能调用");
            }
        };

        //定义宝马汽车子类
        var BMW=function(price,speed){
            this.price=price;
            this.speed=speed;
        };
        //抽象工厂实现对Car抽象类的继承
        VeicleFactory(BMW,"Car");
        BMW.prototype.getPrice=function(){
            return this.price;
        };
        BMW.prototype.getSpeed=function(){
            return this.speed;
        };

        //兰博基尼汽车子类
        var Lamborghini=function(price,speed){
            this.price=price;
            this.speed=speed;
        };
        //抽象工厂实现对Car抽象类的继承
        VeicleFactory(Lamborghini,"Car");
        Lamborghini.prototype.getPrice=function(){
            return this.price;
        };
        VeicleFactory.prototype.getSpeed=function(){
            return this.speed;
        };

        //兰博基尼汽车子类
        var YuTong=function(price,passenger){
            this.price=price;
            this.passenger=passenger;
        };
        //抽象工厂实现对Bus抽象类的继承
        VeicleFactory(YuTong,"Bus");
        YuTong.prototype.getPrice=function(){
            return this.price;
        };
        YuTong.prototype.getSpeed=function(){
            return this.passenger;
        };

        //陕汽德龙货车子类
        var DeLong=function(price,trainload){
            this.price=price;
            this.trainload=trainload;
        };
        //抽象工厂实现抽象类Truck的继承
        VeicleFactory(DeLong,"Truck");
        DeLong.prototype.getPrice=function(){
            return this.price;
        };
        DeLong.prototype.getSpeed=function(){
            return this.trainload;
        };
    </script>
</head>
<body>

</body>
</html>